<h1 align="center">
	:cd: Задание 2: bash
</h1>


### Для начала напишем скрипт, который просто будет искать слово _php7.4_ во всех директориях заданной папки не зависимо от регистра:

```bash
#!/bin/bash

# Директория логов
LOG_DIR="/home/soroka/Devops_test_task/ex2/folder_text"

# Слово для поиска
SEARCH_TERM="php7.4"

# Поиск слова в файлах логов и подсчет количества совпадений
grep -i -r "$SEARCH_TERM" "$LOG_DIR" | wc -l

```

Разберем строку grep -i -r "$SEARCH_TERM" "$LOG_DIR" | wc -l на составляющие:

#### grep -i -r "$SEARCH_TERM" "$LOG_DIR"

- -i: Поиск будет выполняться без учёта регистра. 

- -r: Опция, указывающая на рекурсивный поиск в директории и всех ее поддиректориях.

- \$ SEARCH_TERM: Переменная, содержащая слово или фразу для поиска (в данном случае "php7.4"). Знаки $ и " позволяют использовать значение переменной.

- \$LOG_DIR: Переменная, указывающая на директорию, в которой будет производиться поиск (например, /var/log).

- |: Это оператор конвейера (pipe), который передает вывод одной команды как ввод для другой команды.

#### wc -l

- wc: Команда для подсчета строк, слов и символов.

- -l: Опция, указывающая на подсчет только строк. В данном случае она подсчитывает количество строк, которые были выведены командой grep.
---

### Теперь посчитаем время выполнения скрипта

тут пришлось немного пошаманить, прийти к переменным, так как без адекватно вывести разницу по времени не получается:

```bash
#!/bin/bash

# Директория логов
LOG_DIR="/home/soroka/Devops_test_task/ex2/folder_text"

# Слово для поиска
SEARCH_TERM="php7.4"

# Запись таймстемпа начала
start_time=$(date +%s%3N)

# Поиск слова в файлах логов и подсчет количества совпадений
count=$(grep -i -r "$SEARCH_TERM" "$LOG_DIR" | wc -l)

# Запись таймстемпа конца
end_time=$(date +%s%3N)

# Подсчет времени выполнения
execution_time=$((end_time - start_time))

# Вывод результата
echo "Количество строк с совпадением '$SEARCH_TERM': $count"
echo "Время выполнения скрипта: $execution_time миллисекунд"
```

Тут отдельного внимания требует команда X=$(date +%s%3N):
- записывает текущее время в миллисекундах в переменную X.

Соответственно через разницу временных меток мы и находим время выполнения скрипта.

---

### Вывести результат работы script.sh в другой файл

Выводить результат будем в файл output.txt при помощи команды '>'

```
./script.sh > output.txt
```

Нужно учитывать что команда '>' перезаписывает файл.
Если требуется не перезаписывать вывод, а дописывать вывод в файл (словно логи) можно использовать команду '>>'.

---

### Шебанг баш

Shebang сообщает операционной системе, что для выполнения этого скрипта необходимо использовать интерпретатор Bash, который обычно находится по пути /bin/bash.

```
#!/bin/bash
```

Разбор строки:

- #! — это шебанг, специальный символ, указывающий, что дальше идет путь к интерпретатору.

- /bin/bash — полный путь к интерпретатору Bash на большинстве Linux-систем.

Без этой строки операционная система не будет знать, какой интерпретатор использовать для выполнения скрипта.